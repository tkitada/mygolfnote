<!DOCTYPE html>
<html>
  <head>
    <title>Mygolfnote</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <script src="https://kit.fontawesome.com/c7023171fe.js" crossorigin="anonymous"></script>
    <%= stylesheet_pack_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body class="d-flex flex-column min-vh-100">
    <%= render "layouts/header" %>
    
    <% if controller_name == "practice_posts" && action_name == "index" %>
      <div class="main-visual">
        <div class="main-visual-content">
          <h3 class="main-visual-title display-4 font-weight-bold">MyGolfnote</h3>
          <p class="main-visual-text">あなたのゴルフ練習を記録・共有しよう</p>
          <% if user_signed_in? %>
            <div class="mt-3">
              <%= link_to new_practice_post_path, class: "btn btn-success", data: {turbolinks: "false"} do %>
                <i class="fa-solid fa-golf-ball-tee"></i> Golf note
              <% end %>
            </div>
          <% else %>
            <div class="mt-3">
              <%= link_to new_user_registration_path, class: "btn btn-success sign-up" do %>
                <i class="fa-solid fa-address-card"></i> 新規登録
              <% end %>
              <%= link_to new_user_session_path, class: "btn btn-info ml-1 sign-in" do %>
                <i class="fa-solid fa-right-to-bracket"></i> ログイン
              <% end %>
            </div>
            <div class="mt-2">
              <%= link_to users_guest_sign_in_path, method: :post, class: "btn btn-secondary ml-1 sign-in" do %>
                <i class="fa-solid fa-ghost"></i> ゲストログイン(観覧用)
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    
    <% elsif controller_name == "groups" && ["index", "new"].include?(action_name) && !controller_path.start_with?("admin/") %>
      <div class="main-visual group-visual">
        <div class="main-visual-content">
          <h3 class="main-visual-title display-4 font-weight-bold">Golf仲間とつながろう</h3>
          <p class="main-visual-text">グループを作成・参加する</p>
          <div class="my-3">
            <%= link_to "Group作成", new_group_path, class: "btn btn-success" %>
            <%= link_to "Group一覧", groups_path, class: "btn btn-info mr-2" %>
          </div>
        </div>
      </div>
    <% end %>
       

    <main>
      <% if flash[:notice] %>
        <div class="flash notice my-3"><%= flash[:notice] %></div>
      <% end %>   
      <% if flash[:alert] %>
        <div class="flash alert my-3"><%= flash[:alert] %></div>
      <% end %>
    
      <% if controller_name == "practice_posts" && action_name == "index" %>
        <div class="container d-flex flex-column align-items-center my-3">
          <h4 class="mb-3">気になるメモを検索</h4>
          <%= render "public/searches/searchform" %>
        </div>
      <% end %>
        
      <%= yield %>
    </main>

    <%= render "layouts/footer" %>
    <script src="https://cdn.jsdelivr.net/npm/jquery-jpostal-ja@2.14.45/jquery.jpostal.min.js"></script> #jquery.jpostal.jsを使用して、郵便番号から住所を自動入力
  </body>
</html>
